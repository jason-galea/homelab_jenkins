# x-jenkins-linux-node: &jenkins_linux_node_anchor
#   remoteFS: "/home/jenkins"
#   launcher:
#     inbound:
#       workDirSettings:
#         disabled: true
#         failIfWorkDirIsMissing: false
#         internalDir: "remoting"
#         workDirPath: "/tmp"

jenkins:
  # location:
  #   url: "http://10.1.1.182:8080/" ### TODO: Template value on launch
  numExecutors: 0 ### Disable built-in node
  # nodes:
  #   - permanent:
  #       name: static-agent1
  #       <<: *jenkins_linux_node_anchor
  #   - permanent:
  #       name: static-agent2
  #       <<: *jenkins_linux_node_anchor
  clouds:
    - docker:
        name: docker_cloud
        dockerApi:
          dockerHost:
            uri: unix:///var/run/docker.sock
        exposeDockerHost: true
        templates:
          - name: "docker_agent"
            labelString: "docker_agent"
            connector: "attach"
            dockerTemplateBase:
              image: "jenkins/agent:jdk21"
              mounts:
                - "type=tmpfs,destination=/run"
                - "type=bind,source=/var/run/docker.sock,destination=/var/run/docker.sock"
                # - "type=volume,src=hello,dst=/world"
              environmentsString: |
                hello=world
                foo=bar
              # DOCKER_TLS_CERTDIR=""
            # pullStrategy: PULL_ALWAYS
            # pullTimeout: 300
            remoteFs: "/home/jenkins/agent/"
            instanceCapStr: "10"

unclassified:
  gitHubConfiguration:
    apiRateLimitChecker: ThrottleOnOver
