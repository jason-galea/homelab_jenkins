x-jenkins-linux-node: &jenkins_linux_node_anchor
  remoteFS: "/home/jenkins"
  launcher:
    inbound:
      workDirSettings:
        disabled: true
        failIfWorkDirIsMissing: false
        internalDir: "remoting"
        workDirPath: "/tmp"

jenkins:
  numExecutors: 0 ### Disable built-in node
  nodes:
    - permanent:
        name: "static-agent1"
        <<: *jenkins_linux_node_anchor
    - permanent:
        name: "static-agent2"
        <<: *jenkins_linux_node_anchor
  clouds:
    - docker:
        containerCap: 10
        dockerApi:
          connectTimeout: 60
          dockerHost:
            uri: "tcp://jenkins-docker:2376"
          readTimeout: 60
        exposeDockerHost: true
        name: "docker"
        templates:
          - name: "default_docker_agent"
            labelString: "default_docker_agent"
            connector: "attach"
            dockerTemplateBase:
              cpuPeriod: 0
              cpuQuota: 0
              image: "jenkins/agent"
            pullStrategy: PULL_ALWAYS
            pullTimeout: 300
            remoteFs: "/tmp/"
